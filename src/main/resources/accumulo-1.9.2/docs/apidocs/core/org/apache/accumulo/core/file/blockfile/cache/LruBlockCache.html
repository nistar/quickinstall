<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_60) on Fri Oct 31 17:21:51 EDT 2014 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>LruBlockCache (Core 1.6.1 API)</title>
<meta name="date" content="2014-10-31">
<link rel="stylesheet" type="text/css" href="../../../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="LruBlockCache (Core 1.6.1 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/LruBlockCache.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/HeapSize.html" title="interface in org.apache.accumulo.core.file.blockfile.cache"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.CacheStats.html" title="class in org.apache.accumulo.core.file.blockfile.cache"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html" target="_top">Frames</a></li>
<li><a href="LruBlockCache.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.accumulo.core.file.blockfile.cache</div>
<h2 title="Class LruBlockCache" class="title">Class LruBlockCache</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.accumulo.core.file.blockfile.cache.LruBlockCache</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/BlockCache.html" title="interface in org.apache.accumulo.core.file.blockfile.cache">BlockCache</a>, <a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/HeapSize.html" title="interface in org.apache.accumulo.core.file.blockfile.cache">HeapSize</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">LruBlockCache</span>
extends <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/BlockCache.html" title="interface in org.apache.accumulo.core.file.blockfile.cache">BlockCache</a>, <a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/HeapSize.html" title="interface in org.apache.accumulo.core.file.blockfile.cache">HeapSize</a></pre>
<div class="block">A block cache implementation that is memory-aware using <a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/HeapSize.html" title="interface in org.apache.accumulo.core.file.blockfile.cache"><code>HeapSize</code></a>, memory-bound using an LRU eviction algorithm, and concurrent: backed by a
 <a href="http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html?is-external=true" title="class or interface in java.util.concurrent"><code>ConcurrentHashMap</code></a> and with a non-blocking eviction thread giving constant-time <a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#cacheBlock(java.lang.String,%20byte[],%20boolean)"><code>cacheBlock(java.lang.String, byte[], boolean)</code></a> and <a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#getBlock(java.lang.String)"><code>getBlock(java.lang.String)</code></a> operations.
 <p>
 
 Contains three levels of block priority to allow for scan-resistance and in-memory families. A block is added with an inMemory flag if necessary, otherwise a
 block becomes a single access priority. Once a blocked is accessed again, it changes to multiple access. This is used to prevent scans from thrashing the
 cache, adding a least-frequently-used element to the eviction algorithm.
 <p>
 
 Each priority is given its own chunk of the total cache to ensure fairness during eviction. Each priority will retain close to its maximum size, however, if
 any priority is not using its entire chunk the others are able to grow beyond their chunk size.
 <p>
 
 Instantiated at a minimum with the total size and average block size. All sizes are in bytes. The block size is not especially important as this cache is
 fully dynamic in its sizing of blocks. It is only used for pre-allocating data structures and in initial heap estimation of the map.
 <p>
 
 The detailed constructor defines the sizes for the three priorities (they should total to the maximum size defined). It also sets the levels that trigger and
 control the eviction thread.
 <p>
 
 The acceptable size is the cache size level which triggers the eviction process to start. It evicts enough blocks to get the size below the minimum size
 specified.
 <p>
 
 Eviction happens in a separate thread and involves a single full-scan of the map. It determines how many bytes must be freed to reach the minimum size, and
 then while scanning determines the fewest least-recently-used blocks necessary from each of the three priorities (would be 3 times bytes to free). It then
 uses the priority chunk sizes to evict fairly according to the relative sizes and usage.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.CacheStats.html" title="class in org.apache.accumulo.core.file.blockfile.cache">LruBlockCache.CacheStats</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#CACHE_FIXED_OVERHEAD">CACHE_FIXED_OVERHEAD</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#LruBlockCache(long,%20long)">LruBlockCache</a></strong>(long&nbsp;maxSize,
             long&nbsp;blockSize)</code>
<div class="block">Default constructor.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#LruBlockCache(long,%20long,%20boolean)">LruBlockCache</a></strong>(long&nbsp;maxSize,
             long&nbsp;blockSize,
             boolean&nbsp;evictionThread)</code>
<div class="block">Constructor used for testing.</div>
</td>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#LruBlockCache(long,%20long,%20boolean,%20int,%20float,%20int,%20float,%20float,%20float,%20float,%20float)">LruBlockCache</a></strong>(long&nbsp;maxSize,
             long&nbsp;blockSize,
             boolean&nbsp;evictionThread,
             int&nbsp;mapInitialSize,
             float&nbsp;mapLoadFactor,
             int&nbsp;mapConcurrencyLevel,
             float&nbsp;minFactor,
             float&nbsp;acceptableFactor,
             float&nbsp;singleFactor,
             float&nbsp;multiFactor,
             float&nbsp;memoryFactor)</code>
<div class="block">Configurable constructor.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/CacheEntry.html" title="interface in org.apache.accumulo.core.file.blockfile.cache">CacheEntry</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#cacheBlock(java.lang.String,%20byte[])">cacheBlock</a></strong>(<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;blockName,
          byte[]&nbsp;buf)</code>
<div class="block">Cache the block with the specified name and buffer.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/CacheEntry.html" title="interface in org.apache.accumulo.core.file.blockfile.cache">CacheEntry</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#cacheBlock(java.lang.String,%20byte[],%20boolean)">cacheBlock</a></strong>(<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;blockName,
          byte[]&nbsp;buf,
          boolean&nbsp;inMemory)</code>
<div class="block">Cache the block with the specified name and buffer.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#calculateOverhead(long,%20long,%20int)">calculateOverhead</a></strong>(long&nbsp;maxSize,
                 long&nbsp;blockSize,
                 int&nbsp;concurrency)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#evictBlock(org.apache.accumulo.core.file.blockfile.cache.CachedBlock)">evictBlock</a></strong>(<a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/CachedBlock.html" title="class in org.apache.accumulo.core.file.blockfile.cache">CachedBlock</a>&nbsp;block)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/CachedBlock.html" title="class in org.apache.accumulo.core.file.blockfile.cache">CachedBlock</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#getBlock(java.lang.String)">getBlock</a></strong>(<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;blockName)</code>
<div class="block">Get the buffer of the block with the specified name.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#getCurrentSize()">getCurrentSize</a></strong>()</code>
<div class="block">Get the current size of this cache.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#getEvictedCount()">getEvictedCount</a></strong>()</code>
<div class="block">Get the number of blocks that have been evicted during the lifetime of this cache.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#getEvictionCount()">getEvictionCount</a></strong>()</code>
<div class="block">Get the number of eviction runs that have occurred</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#getFreeSize()">getFreeSize</a></strong>()</code>
<div class="block">Get the current size of this cache.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#getMaxSize()">getMaxSize</a></strong>()</code>
<div class="block">Get the maximum size of this cache.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.CacheStats.html" title="class in org.apache.accumulo.core.file.blockfile.cache">LruBlockCache.CacheStats</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#getStats()">getStats</a></strong>()</code>
<div class="block">Get counter statistics for this cache.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#heapSize()">heapSize</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#logStats()">logStats</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#setMaxSize(long)">setMaxSize</a></strong>(long&nbsp;maxSize)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#shutdown()">shutdown</a></strong>()</code>
<div class="block">Shutdown the cache.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#size()">size</a></strong>()</code>
<div class="block">Get the size of this cache (number of cached blocks)</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="CACHE_FIXED_OVERHEAD">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>CACHE_FIXED_OVERHEAD</h4>
<pre>public static final&nbsp;long CACHE_FIXED_OVERHEAD</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="LruBlockCache(long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LruBlockCache</h4>
<pre>public&nbsp;LruBlockCache(long&nbsp;maxSize,
             long&nbsp;blockSize)</pre>
<div class="block">Default constructor. Specify maximum size and expected average block size (approximation is fine).
 
 <p>
 All other factors will be calculated based on defaults specified in this class.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>maxSize</code> - maximum size of cache, in bytes</dd><dd><code>blockSize</code> - approximate size of each block, in bytes</dd></dl>
</li>
</ul>
<a name="LruBlockCache(long, long, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LruBlockCache</h4>
<pre>public&nbsp;LruBlockCache(long&nbsp;maxSize,
             long&nbsp;blockSize,
             boolean&nbsp;evictionThread)</pre>
<div class="block">Constructor used for testing. Allows disabling of the eviction thread.</div>
</li>
</ul>
<a name="LruBlockCache(long, long, boolean, int, float, int, float, float, float, float, float)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>LruBlockCache</h4>
<pre>public&nbsp;LruBlockCache(long&nbsp;maxSize,
             long&nbsp;blockSize,
             boolean&nbsp;evictionThread,
             int&nbsp;mapInitialSize,
             float&nbsp;mapLoadFactor,
             int&nbsp;mapConcurrencyLevel,
             float&nbsp;minFactor,
             float&nbsp;acceptableFactor,
             float&nbsp;singleFactor,
             float&nbsp;multiFactor,
             float&nbsp;memoryFactor)</pre>
<div class="block">Configurable constructor. Use this constructor if not using defaults.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>maxSize</code> - maximum size of this cache, in bytes</dd><dd><code>blockSize</code> - expected average size of blocks, in bytes</dd><dd><code>evictionThread</code> - whether to run evictions in a bg thread or not</dd><dd><code>mapInitialSize</code> - initial size of backing ConcurrentHashMap</dd><dd><code>mapLoadFactor</code> - initial load factor of backing ConcurrentHashMap</dd><dd><code>mapConcurrencyLevel</code> - initial concurrency factor for backing CHM</dd><dd><code>minFactor</code> - percentage of total size that eviction will evict until</dd><dd><code>acceptableFactor</code> - percentage of total size that triggers eviction</dd><dd><code>singleFactor</code> - percentage of total size for single-access blocks</dd><dd><code>multiFactor</code> - percentage of total size for multiple-access blocks</dd><dd><code>memoryFactor</code> - percentage of total size for in-memory blocks</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="setMaxSize(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setMaxSize</h4>
<pre>public&nbsp;void&nbsp;setMaxSize(long&nbsp;maxSize)</pre>
</li>
</ul>
<a name="cacheBlock(java.lang.String, byte[], boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cacheBlock</h4>
<pre>public&nbsp;<a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/CacheEntry.html" title="interface in org.apache.accumulo.core.file.blockfile.cache">CacheEntry</a>&nbsp;cacheBlock(<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;blockName,
                    byte[]&nbsp;buf,
                    boolean&nbsp;inMemory)</pre>
<div class="block">Cache the block with the specified name and buffer.
 <p>
 It is assumed this will NEVER be called on an already cached block. If that is done, it is assumed that you are reinserting the same exact block due to a
 race condition and will update the buffer but not modify the size of the cache.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/BlockCache.html#cacheBlock(java.lang.String,%20byte[],%20boolean)">cacheBlock</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/BlockCache.html" title="interface in org.apache.accumulo.core.file.blockfile.cache">BlockCache</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>blockName</code> - block name</dd><dd><code>buf</code> - block buffer</dd><dd><code>inMemory</code> - if block is in-memory</dd></dl>
</li>
</ul>
<a name="cacheBlock(java.lang.String, byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cacheBlock</h4>
<pre>public&nbsp;<a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/CacheEntry.html" title="interface in org.apache.accumulo.core.file.blockfile.cache">CacheEntry</a>&nbsp;cacheBlock(<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;blockName,
                    byte[]&nbsp;buf)</pre>
<div class="block">Cache the block with the specified name and buffer.
 <p>
 It is assumed this will NEVER be called on an already cached block. If that is done, it is assumed that you are reinserting the same exact block due to a
 race condition and will update the buffer but not modify the size of the cache.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/BlockCache.html#cacheBlock(java.lang.String,%20byte[])">cacheBlock</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/BlockCache.html" title="interface in org.apache.accumulo.core.file.blockfile.cache">BlockCache</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>blockName</code> - block name</dd><dd><code>buf</code> - block buffer</dd></dl>
</li>
</ul>
<a name="getBlock(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlock</h4>
<pre>public&nbsp;<a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/CachedBlock.html" title="class in org.apache.accumulo.core.file.blockfile.cache">CachedBlock</a>&nbsp;getBlock(<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;blockName)</pre>
<div class="block">Get the buffer of the block with the specified name.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/BlockCache.html#getBlock(java.lang.String)">getBlock</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/BlockCache.html" title="interface in org.apache.accumulo.core.file.blockfile.cache">BlockCache</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>blockName</code> - block name</dd>
<dt><span class="strong">Returns:</span></dt><dd>buffer of specified block name, or null if not in cache</dd></dl>
</li>
</ul>
<a name="evictBlock(org.apache.accumulo.core.file.blockfile.cache.CachedBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>evictBlock</h4>
<pre>protected&nbsp;long&nbsp;evictBlock(<a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/CachedBlock.html" title="class in org.apache.accumulo.core.file.blockfile.cache">CachedBlock</a>&nbsp;block)</pre>
</li>
</ul>
<a name="getMaxSize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxSize</h4>
<pre>public&nbsp;long&nbsp;getMaxSize()</pre>
<div class="block">Get the maximum size of this cache.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/BlockCache.html#getMaxSize()">getMaxSize</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/BlockCache.html" title="interface in org.apache.accumulo.core.file.blockfile.cache">BlockCache</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>max size in bytes</dd></dl>
</li>
</ul>
<a name="getCurrentSize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCurrentSize</h4>
<pre>public&nbsp;long&nbsp;getCurrentSize()</pre>
<div class="block">Get the current size of this cache.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>current size in bytes</dd></dl>
</li>
</ul>
<a name="getFreeSize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFreeSize</h4>
<pre>public&nbsp;long&nbsp;getFreeSize()</pre>
<div class="block">Get the current size of this cache.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>current size in bytes</dd></dl>
</li>
</ul>
<a name="size()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>size</h4>
<pre>public&nbsp;long&nbsp;size()</pre>
<div class="block">Get the size of this cache (number of cached blocks)</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>number of cached blocks</dd></dl>
</li>
</ul>
<a name="getEvictionCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEvictionCount</h4>
<pre>public&nbsp;long&nbsp;getEvictionCount()</pre>
<div class="block">Get the number of eviction runs that have occurred</div>
</li>
</ul>
<a name="getEvictedCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEvictedCount</h4>
<pre>public&nbsp;long&nbsp;getEvictedCount()</pre>
<div class="block">Get the number of blocks that have been evicted during the lifetime of this cache.</div>
</li>
</ul>
<a name="logStats()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logStats</h4>
<pre>public&nbsp;void&nbsp;logStats()</pre>
</li>
</ul>
<a name="getStats()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStats</h4>
<pre>public&nbsp;<a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.CacheStats.html" title="class in org.apache.accumulo.core.file.blockfile.cache">LruBlockCache.CacheStats</a>&nbsp;getStats()</pre>
<div class="block">Get counter statistics for this cache.
 
 <p>
 Includes: total accesses, hits, misses, evicted blocks, and runs of the eviction processes.</div>
</li>
</ul>
<a name="heapSize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>heapSize</h4>
<pre>public&nbsp;long&nbsp;heapSize()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/HeapSize.html#heapSize()">heapSize</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/HeapSize.html" title="interface in org.apache.accumulo.core.file.blockfile.cache">HeapSize</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>Approximate 'exclusive deep size' of implementing object. Includes count of payload and hosting object sizings.</dd></dl>
</li>
</ul>
<a name="calculateOverhead(long, long, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>calculateOverhead</h4>
<pre>public static&nbsp;long&nbsp;calculateOverhead(long&nbsp;maxSize,
                     long&nbsp;blockSize,
                     int&nbsp;concurrency)</pre>
</li>
</ul>
<a name="shutdown()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>shutdown</h4>
<pre>public&nbsp;void&nbsp;shutdown()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/BlockCache.html#shutdown()">BlockCache</a></code></strong></div>
<div class="block">Shutdown the cache.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/BlockCache.html#shutdown()">shutdown</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/BlockCache.html" title="interface in org.apache.accumulo.core.file.blockfile.cache">BlockCache</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/LruBlockCache.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/HeapSize.html" title="interface in org.apache.accumulo.core.file.blockfile.cache"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.CacheStats.html" title="class in org.apache.accumulo.core.file.blockfile.cache"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html" target="_top">Frames</a></li>
<li><a href="LruBlockCache.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2014 <a href="http://accumulo.apache.org/">Apache Accumulo Project</a>. All rights reserved.</small></p>
</body>
</html>
